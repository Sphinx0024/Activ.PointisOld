<!DOCTYPE html>
<html class="h-100" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>POINTIS</title>
    <!-- Favicon icon -->
    <!-- <link rel="icon" type="image/png" sizes="16x16" href="#"> -->

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="css/style.css">


</head>
<script>

    /*
          function validation() {
        
              var expressionReguliere = /^(([^<>()[]\.,;:s@]+(.[^<>()[]\.,;:s@]+)*)|(.+))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$/;
              var phoneRegex = /^\d{10}$/;
              if (expressionReguliere.test(document.getElementById("log").value)) {
                  fetch('https://face.activactions.net/api/Societe/Get')
                      .then(res => res.json())
                      .then(data => {
                          for (let item of data) {
                              var id = item.ID;
                              //console.log(i);
                              fetch('https://face.activactions.net/api/Connexion/Get/' + id)
                                  .then(res => res.json())
                                  .then(data => {
                                      let log = document.getElementById("log").value;
                                      let pwd = document.getElementById("pass").value;
                                      for (let item of data) {
                                          let login = item.Login;
                                          let passe = item.Password;
                                          // console.log(t);
                                          if (login == log && passe == pwd) {
                                              let idSociete = item.SocieteID;
                                              //sessionStorage.setItem("q", i);
        
                                             
        
                                              fetch('https://face.activactions.net/api/Employes/Get/' + idSociete)
                                                  .then(res => res.json())
                                                  .then(data => {
        
                                                    
                                                      for (let item of data) {
                                                          let emailAd = item.Email;
                                                          if (log == emailAd) {
        
                                                              let nameAd = item.Nom;
                                                              let prenomAd = item.Prenom;
                                                              let idEmploye = item.EmployeID;
                                                              let idSociete = item.SocieteID;
        
                                                              sessionStorage.setItem('emailAd', emailAd);
                                                              sessionStorage.setItem('nameAd', nameAd);
                                                              sessionStorage.setItem('prenomAd', prenomAd);
                                                              sessionStorage.setItem('idEmployeUser', idEmploye);
                                                              sessionStorage.setItem('idSociete', idSociete);
        
                                                              fetch('https://face.activactions.net/api/Societe/Get/' + idSociete)
                                                                  .then(res => res.json())
                                                                  .then(data => {
                                                                      for (let item of data) {
                                                                          let nameSociete = item.RaisonSociale;
                                                                          sessionStorage.setItem('nameSoc', nameSociete);
                                                                        //   location.replace('./ACTIV/Accueil.html');
                                                                          location.replace('../PointisApp/index.html');
                                                                      }
                                                                   
        
                                                                  });
        
                                                          }
                                                      }
                                                  });
        
                                          }
        
                                        
                                      }
                                  });
                          }
                      });
        
              }
              else
                  if (phoneRegex.test(document.getElementById("log").value)) {
                      //console.log("Telephone");
                      fetch('https://face.activactions.net/api/Societe/Get')
                          .then(res => res.json())
                          .then(data => {
                              console.log(data);
                              for (let item of data) {
                                  let id = item.ID;
                               
                                  fetch('https://face.activactions.net/api/Employes/Get/' + id)
                                      .then(res => res.json())
                                      .then(data => {
                                      
                                          for (let item of data) {
                                              let login = document.getElementById("log").value;
                                              let pwd = document.getElementById("pass").value;
                                              let tel = item.Telephone;
                                              let passe = item.Password;
                                              //var responsableItem = item.Responsable;
        
                                              if (login == tel && pwd == passe) {
                                                  var email = item.Email;
                                                  var nom = item.Nom;
                                                  var prenom = item.Prenom;
                                                  var responsable = item.Responsable;
                                                  var idEmploye = item.EmployeID;
                                                  var idSociete = item.SocieteID;
        
                                                  sessionStorage.setItem('nameAd', nom);
                                                  sessionStorage.setItem('prenomAd', prenom);
                                                  sessionStorage.setItem('monresponsable', responsable);
        
                                                  fetch('https://face.activactions.net/api/Connexion/Get/' + idSociete)
                                                      .then(res => res.json())
                                                      .then(data => {
                                                          for (let item of data) {
                                                              var log = item.Login;
                                                              if (login == log) {
                                                                  fetch('https://face.activactions.net/api/Societe/Get/' + idSociete)
                                                                      .then(res => res.json())
                                                                      .then(data => {
                                                                          for (let item of data) {
                                                                              let nameSociete = item.RaisonSociale;
                                                                              sessionStorage.setItem('nameSoc', nameSociete);
                                                                              sessionStorage.setItem("idSociete", idSociete);
                                                                              sessionStorage.setItem("idEmployeUser", idEmploye);
                                                                            //   location.replace('./ACTIV/Accueil.html');
                                                                              location.replace('../PointisApp/index.html');
                                                                          }
        
                                                                      });
        
                                                              }
                                                              else {
                                                                  fetch('https://face.activactions.net/api/Societe/Get/' + idSociete)
                                                                      .then(res => res.json())
                                                                      .then(data => {
                                                                          for (let item of data) {
                                                                              let nameSociete = item.RaisonSociale;
                                                                              sessionStorage.setItem('nameSoc', nameSociete);
                                                                              sessionStorage.setItem("idSociete", idSociete);
                                                                              sessionStorage.setItem("idEmployeNOUser", idEmploye);
                                                                            //   location.replace('./ACTIV/Accueil.html');
                                                                              location.replace('../PointisApp/index.html');
                                                                          }
        
                                                                      });
        
                                                              }
                                                          }
                                                      })
        
        
        
                                              }
        
                                            
                                          }
        
                                      });
                              }
        
                          });
        
        
                  }
                  else {
                      alert("Le login n'est pas correct");
                  }
          }
    
          */


    function validation() {

        var expressionReguliere = /^(([^<>()[]\.,;:s@]+(.[^<>()[]\.,;:s@]+)*)|(.+))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$/;
        var phoneRegex = /^\d{10}$/;
        if (expressionReguliere.test(document.getElementById("log").value)) {
            fetch('https://face.activactions.net/api/Societe/Get')
                .then(res => res.json())
                .then(data => {
                    for (let item of data) {
                        var id = item.ID;
                        fetch('https://face.activactions.net/api/Connexion/Get/' + id)
                            .then(res => res.json())
                            .then(data => {
                                let log = document.getElementById("log").value;
                                let pwd = document.getElementById("pass").value;
                                for (let item of data) {
                                    let login = item.Login;
                                    let passe = item.Password;
                                    // console.log(t);
                                    if (login == log && passe == pwd) {
                                        let idSociete = item.SocieteID;

                                        fetch('https://face.activactions.net/api/Employes/Get/' + idSociete)
                                            .then(res => res.json())
                                            .then(data => {

                                                for (let item of data) {
                                                    let emailAd = item.Email;
                                                    if (log == emailAd) {

                                                        let nameAd = item.Nom;
                                                        let prenomAd = item.Prenom;
                                                        let idEmploye = item.EmployeID;
                                                        let idSociete = item.SocieteID;

                                                        sessionStorage.setItem('emailAd', emailAd);
                                                        sessionStorage.setItem('nameAd', nameAd);
                                                        sessionStorage.setItem('prenomAd', prenomAd);
                                                        sessionStorage.setItem('idEmployeUser', idEmploye);
                                                        sessionStorage.setItem('idSociete', idSociete);

                                                        fetch('https://face.activactions.net/api/Societe/Get/' + idSociete)
                                                            .then(res => res.json())
                                                            .then(data => {
                                                                for (let item of data) {
                                                                    let nameSociete = item.RaisonSociale;
                                                                    sessionStorage.setItem('nameSoc', nameSociete);
                                                                    location.replace('../PointisApp/index.html');


                                                                }

                                                            });

                                                    }
                                                }
                                            });

                                    }

                                }
                            });
                    }
                });

        }
        else
            if (phoneRegex.test(document.getElementById("log").value)) {
                fetch('https://face.activactions.net/api/Societe/Get')
                    .then(res => res.json())
                    .then(data => {
                        console.log(data);
                        for (let item of data) {
                            let id = item.ID;

                            fetch('https://face.activactions.net/api/Employes/Get/' + id)
                                .then(res => res.json())
                                .then(data => {
                                    //console.log(data);
                                    for (let item of data) {
                                        let login = document.getElementById("log").value;
                                        let pwd = document.getElementById("pass").value;
                                        let tel = item.Telephone;
                                        let passe = item.Password;
                                        //var responsableItem = item.Responsable;

                                        if (login == tel && pwd == passe) {
                                            var email = item.Email;
                                            var nom = item.Nom;
                                            var prenom = item.Prenom;
                                            var responsable = item.Responsable;
                                            var idEmploye = item.EmployeID;
                                            var idSociete = item.SocieteID;

                                            sessionStorage.setItem('nameAd', nom);
                                            sessionStorage.setItem('prenomAd', prenom);
                                            sessionStorage.setItem('monresponsable', responsable);

                                            fetch('https://face.activactions.net/api/Connexion/Get/' + idSociete)
                                                .then(res => res.json())
                                                .then(data => {
                                                    for (let item of data) {
                                                        var log = item.Login;
                                                        if (email == log) {
                                                            fetch('https://face.activactions.net/api/Societe/Get/' + idSociete)
                                                                .then(res => res.json())
                                                                .then(data => {
                                                                    for (let item of data) {
                                                                        let nameSociete = item.RaisonSociale;
                                                                        sessionStorage.setItem('nameSoc', nameSociete);
                                                                        sessionStorage.setItem("idSociete", idSociete);
                                                                        sessionStorage.setItem("idEmployeUser", idEmploye);

                                                                        location.replace('../PointisApp/index.html');
                                                                    }

                                                                });

                                                        }
                                                        else {
                                                            fetch('https://face.activactions.net/api/Societe/Get/' + idSociete)
                                                                .then(res => res.json())
                                                                .then(data => {
                                                                    for (let item of data) {
                                                                        let nameSociete = item.RaisonSociale;
                                                                        sessionStorage.setItem('nameSoc', nameSociete);
                                                                        sessionStorage.setItem("idSociete", idSociete);
                                                                        sessionStorage.setItem("idEmployeNOUser", idEmploye);

                                                                        location.replace('../PointisApp/index.html');

                                                                    }

                                                                });

                                                        }
                                                    }
                                                })

                                        }

                                    }

                                });
                        }

                    });


            }
            else {
                alert("Le login n'est pas correct");
            }
    }

</script>

<body class="corp h-100">

    <header class="site-navbar js-sticky-header site-navbar-target" role="banner">

        <div class="container">
            <div class="row align-items-center">

                <div class="col-6 col-xl-2">
                    <div class="mb-0 site-logo"><a href="index.html" class="mb-0"><img src="" class="img-fluid"
                                width="40%" alt=""><span class="text-primary"></span> </a></div>
                </div>

                <div class="col-12 col-md-10 d-none d-xl-block">
                    <nav class="site-navigation position-relative text-right" role="navigation">

                        <ul class="site-menu main-menu js-clone-nav mr-auto d-none
                  d-lg-block">
                            <!-- .site-wrap     <li><a href="#home-section" class="nav-link">Home</a></li>
                <li class="has-children">
                  <a href="#features-section" class="nav-link">Features</a>
                  <ul class="dropdown">
                    <li><a href="#" class="nav-link">Money Saving</a></li>
                    <li><a href="#" class="nav-link">Powerful Apps</a></li>
                    <li><a href="#" class="nav-link">Efficient Support</a></li>
                    <li><a href="#" class="nav-link">Innovative Technologies</a></li>
                    <li><a href="#" class="nav-link">Corporate Solutions</a></li>
                    <li class="has-children">
                      <a href="#">More Links</a>
                      <ul class="dropdown">
                        <li><a href="#">Menu One</a></li>
                        <li><a href="#">Menu Two</a></li>
                        <li><a href="#">Menu Three</a></li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li><a href="#pricing-section" class="nav-link">Pricing</a></li>


                <li><a href="#blog-section" class="nav-link">Blog</a></li>
                <li><a href="#contact-section" class="nav-link">Contact</a></li>-->
                            <!--  <li class="social"><a href="#contact-section" class="nav-link"><span class="icon-facebook"></span></a></li>
                <li class="social"><a href="#contact-section" class="nav-link"><span class="icon-twitter"></span></a></li>-->
                            <li class="mr-3">
                                <a href="index.html" class="nav-link">
                                   <img src="images/house-door-fill.svg" alt="" width="50px">
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>

                <div class="col-6 d-inline-block d-xl-none ml-md-0 py-3" style="position: relative; top: 3px;"><a
                        href="#" class="site-menu-toggle js-menu-toggle float-right"><span
                            class="icon-menu h3 text-black"></span></a>
                </div>

            </div>
        </div>

    </header>

    <div class="grid grid-cols-2 gap-2">
        <div>
            <img src="images/img-login.png" />
            <form class="mt-10">
                <div class="form-group">
                    <label for="username" class="">Login:
                    </label>

                    <!-- <input class="border-lime-700" type="text" id="username" name="username" placeholder="Nom d'utilisateur"  required> -->
                    <input class="border-2 border-lime-600 rounded-lg ml-32 w-80 h-14 " id="log" placeholder=""
                        required>

                </div>
                <div class="form-group">
                    <label for="password">Mot de passe:
                    </label>

                    <input class="border-2 border-lime-600 rounded-lg ml-32 w-80 h-14 pl-2 " id="pass" type="password"
                        placeholder="*********" required>
                    <!-- <input class="border-green-600" type="password" id="password" name="password" placeholder="Mot de passe" required> -->

                </div>
                <input type="button" value="Login" id="submit" class="submit h-14 bg-green-600" onclick="validation()">
                <span class="ml-56 "></span><br />
                <a href=""><span class="ml-60 "></span></a>
            </form>
        </div>
        <div>

            <img src="images/LOGIIIN2.png" width="500px" class="mr-0" />
        </div>
    </div>
    <script>
        const login = document.getElementById("log");
        const password = document.getElementById("pass");


    </script>
</body>

</html>